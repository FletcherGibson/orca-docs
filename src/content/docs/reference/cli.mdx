---
title: CLI reference
---

Orca ships as the `agent-orca` binary.

## Core (verification)

- `agent-orca init --preset go|node|python` — generate a starter `orca.yaml`
- `agent-orca check [--json]` — run validation checks from `orca.yaml`

## Orchestration (local control plane)

### Task queue + workers (v1)

- `agent-orca do <task> [--mode manual|auto|external] [--role coder]` — fast path for a single task through queue/work validation flow
- `agent-orca queue enqueue <desc>` — enqueue a task
- `agent-orca queue import <file> [--dry-run]` — import tasks from a text file (plain lines, bullets, and markdown `- [ ]` checkboxes; ignores `#` comments and completed `- [x]` items). `--dry-run` previews parsed tasks without enqueueing.
- `agent-orca queue claim <item_id> [--worker coder-1]` — claim a specific queued item for a worker
- `agent-orca queue ls [--active|--failed]` — list tasks (filter active/failed)
- `agent-orca queue retry [item_id] [--latest-failed|--all-failed] [--limit N]` — requeue failed item(s) as new queued task(s) (`retry_of` lineage)
- `agent-orca queue gc` — prune stale `worker-*` worktrees not currently leased
- `agent-orca queue clear` — clear the queue
- `agent-orca work --worker <id> [--mode manual|auto|external] [--role coder] [--timeout-seconds 1800] [--cleanup-worktree]` — lease next queued task and execute it (`--timeout-seconds` applies to both manual and auto/external modes)
  - `manual` mode waits for your commit, then verifies
  - `auto` / `external` execute the configured role from `orca.yaml` (default role name: `coder`); if the worker exits without a commit but leaves tracked changes, Orca attempts a fallback auto-commit
  - writes per-task evidence to `.agent-orca/runs/queue/<item_id>/evidence.json` (including worker output excerpts on failures)


- `agent-orca loop <target> [flags]` — run the experimental loop
  - common: `agent-orca loop . --manual-coder-a --fresh`

### Run history

- `agent-orca runs` — list known runs (supports indexes like `#1`)
- `agent-orca show --run <current|latest|#n|run_id>` — show run summary (includes queue totals, active workers, stale lease count; falls back to live queue/work view if no archived run exists yet; includes next-action hints and latest failed-item summary)
- `agent-orca report --run <selector>` — show run report + score + check summary
- `agent-orca metrics [--json]` — trust-facing queue metrics (pass rate, evidence coverage, top failure causes)

### Logs

- `agent-orca logs <role> [--run <selector>] [-f] [--n 200]`
  - roles: `loop`, `planner`, `coder-a`, `coder-b`, `critic`

### Control

- `agent-orca cancel` — cooperative cancel (writes a cancel flag)
- `agent-orca resume` — resume a cancelled/interrupted run (best-effort)
- `agent-orca retry critic` — rerun critic (best-effort)

### Accept / land

- `agent-orca approve [--run <selector>] [--by <name>]` — record approval artifact
- `agent-orca promote [--run <selector>] [--branch <name>]` — create/switch a local branch at the accepted result
- `agent-orca checkout-winner [--run <selector>] [--branch <name>] [--force]` — legacy convenience command

### Cleanup

- `agent-orca clean [--all]` — remove worktrees; `--all` also removes `.agent-orca/`

## Utilities

- `agent-orca doctor` — environment sanity checks (git repo, worktree, go, role executables from `orca.yaml`, and hints for non-interactive role args)
- `agent-orca version` / `agent-orca --version` — build/version info

## TUI

- `agent-orca ui` — open the run UI (TUI)

## Run selectors

Where supported, `--run` accepts:
- `current`, `latest`
- `#<n>` (from `agent-orca runs`)
- a full run id, or a **unique prefix** of a run id
